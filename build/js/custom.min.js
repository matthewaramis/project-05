!function(e){e(document).ready(function(){let o="";e("#new-quote-button").on("click",function(t){t.preventDefault(),o=document.URL,e.ajax({method:"GET",url:qod_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(o){e(".entry-content").empty(),e(".entry-title").empty(),e(".source").empty(),e(".entry-content").append(`${o[0].content.rendered}`),e(".entry-title").append(`&mdash; ${o[0].title.rendered}`),o[0]._qod_quote_source_url.length>0?e(".source").append(`, <a href="${o[0]._qod_quote_source_url}">\n                ${o[0]._qod_quote_source}\n              </a>`):o[0]._qod_quote_source.length>0&&e(".source").append(`, ${o[0]._qod_quote_source}`);const t=o[0];console.log(o),history.pushState(null,null,qod_vars.home_url+"/"+t.slug)}).fail(function(e){console.log(e)})}),e(window).on("popstate",function(){window.location.replace(o)}),e("#quote-submission-form").on("submit",function(o){o.preventDefault(),function(){const o=e("#quote-author").val(),t=e("#quote-content").val(),n=e("#quote-source").val(),u=e("#quote-source-url").val();e.ajax({method:"POST",url:qod_vars.rest_url+"wp/v2/posts",data:{title:o,content:t,_qod_quote_source:n,_qod_quote_source_url:u,status:"publish"},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",qod_vars.nonce)}}).done(function(o){console.log(o),e(".quote-submission-wrapper").slideUp("fast"),e(".quote-submission").append('<p class="submission-msg">Your form has been submitted!</p>')}).fail(function(){e(".quote-submission").empty(),e(".quote-submission").append('<p class="submission-msg">Oops! Your form has failed to submit.</p>')})}()})})}(jQuery);